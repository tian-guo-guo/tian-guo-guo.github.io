I"‰<h1 id="npm-errorgyp-no-xcode-or-clt-version-detected">NPM Errorï¼šgyp: No Xcode or CLT version detected!</h1>

<p>é—®é¢˜</p>

<p>æœ€è¿‘åœ¨macOS Catalinaä¸­ä½¿ç”¨npmå®‰è£…æ¨¡å—ï¼Œç»å¸¸ä¼šå‡ºç°å¦‚ä¸‹é”™è¯¯ï¼š</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;</span> node-gyp rebuild

No receipt <span class="k">for</span> <span class="s1">'com.apple.pkg.CLTools_Executables'</span> found at <span class="s1">'/'</span><span class="nb">.</span>

No receipt <span class="k">for</span> <span class="s1">'com.apple.pkg.DeveloperToolsCLILeo'</span> found at <span class="s1">'/'</span><span class="nb">.</span>

No receipt <span class="k">for</span> <span class="s1">'com.apple.pkg.DeveloperToolsCLI'</span> found at <span class="s1">'/'</span><span class="nb">.</span>

gyp: No Xcode or CLT version detected!
gyp ERR! configure error 
gyp ERR! stack Error: <span class="sb">`</span>gyp<span class="sb">`</span> failed with <span class="nb">exit </span>code: 1
gyp ERR! stack     at ChildProcess.onCpExit <span class="o">(</span>/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/configure.js:351:16<span class="o">)</span>
gyp ERR! stack     at ChildProcess.emit <span class="o">(</span>events.js:210:5<span class="o">)</span>
gyp ERR! stack     at Process.ChildProcess._handle.onexit <span class="o">(</span>internal/child_process.js:272:12<span class="o">)</span>
gyp ERR! System Darwin 19.3.0
gyp ERR! <span class="nb">command</span> <span class="s2">"/usr/local/bin/node"</span> <span class="s2">"/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js"</span> <span class="s2">"rebuild"</span>
gyp ERR! cwd /Users/yangjian/Documents/temp/test001/node_modules/fsevents
gyp ERR! node <span class="nt">-v</span> v12.13.0
gyp ERR! node-gyp <span class="nt">-v</span> v5.0.5
gyp ERR! not ok
</code></pre></div></div>

<ul>
  <li>æˆªå›¾å¦‚ä¸‹</li>
</ul>

<p><img src="https://cdn.jsdelivr.net/gh/tian-guo-guo/cdn@master/assets/picgoimg/20210118204636.jpg" alt="img" /></p>

<h2 id="è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆ</h2>

<h3 id="1-å°è¯•ç”¨å¦‚ä¸‹å‘½ä»¤è¿›è¡Œä¿®å¤">1. å°è¯•ç”¨å¦‚ä¸‹å‘½ä»¤è¿›è¡Œä¿®å¤</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>xcode-select <span class="nt">--install</span>
</code></pre></div></div>

<p>ç³»ç»Ÿæç¤ºå¦‚ä¸‹ä¿¡æ¯ï¼š</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>xcode-select: error: <span class="nb">command </span>line tools are already installed, use <span class="s2">"Software Update"</span> to <span class="nb">install </span>updates
</code></pre></div></div>

<p>è€Œäº‹å®ä¸Šå¹¶æ²¡æœ‰æ‰€è°“çš„â€Software Updateâ€å¯ä»¥æ›´æ–°</p>

<h3 id="2-æ­£ç¡®å§¿åŠ¿">2. æ­£ç¡®å§¿åŠ¿</h3>

<p>ä¸€ç­¹è«å±•ä¹‹é™…ï¼Œæ‰¾åˆ°å¦‚ä¸‹è§£å†³æ–¹æ¡ˆï¼š</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo rm</span> <span class="nt">-rf</span> <span class="si">$(</span>xcode-select <span class="nt">-print-path</span><span class="si">)</span>
<span class="nv">$ </span>xcode-select <span class="nt">--install</span>
</code></pre></div></div>

<blockquote>
  <p>è¯·å‚è§ï¼š
  - <a href="https://link.zhihu.com/?target=https%3A//github.com/schnerd/d3-scale-cluster/issues/7">https://github.com/schnerd/d3-scale-cluster/issues/7</a>
  - <a href="https://link.zhihu.com/?target=https%3A//github.com/nodejs/node-gyp/blob/master/macOS_Catalina.md">https://github.com/nodejs/node-gyp/blob/master/macOS_Catalina.md</a></p>

  <p>https://zhuanlan.zhihu.com/p/105526835</p>
</blockquote>
:ET